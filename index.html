<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Test de Dígitos</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 40px; }
    #sequence { font-size: 2em; margin: 20px; font-weight: bold; }
    input, button { padding: 10px; font-size: 1em; margin: 10px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>Test de Dígitos (Digit Span)</h1>
  <button onclick="startTest('directo')">Comenzar Dígitos Directo</button>
  <button onclick="startTest('inverso')">Comenzar Dígitos Inverso</button>  <div id="sequence" class="hidden"></div>  <div id="inputArea" class="hidden">
    <p id="instrucciones"></p>
    <input type="text" id="respuesta" placeholder="Escribe la secuencia">
    <button onclick="checkAnswer()">Enviar</button>
  </div>  <p id="resultado"></p>  <script>
  let currentSequence = [];
  let modo = "directo";
  let nivel = 4;
  let score = 0;
  let historial = [];

  function generarSecuencia(longitud) {
    let seq = [];
    for (let i = 0; i < longitud; i++) {
      seq.push(Math.floor(Math.random() * 9) + 1);
    }
    return seq;
  }

  function startTest(tipo) {
    modo = tipo;
    nivel = 4;
    score = 0;
    historial = [];
    document.getElementById("resultado").textContent = "";
    nextLevel();
  }

  function nextLevel() {
    currentSequence = generarSecuencia(nivel);
    document.getElementById("sequence").textContent = currentSequence.join(" ");
    document.getElementById("sequence").classList.remove("hidden");
    document.getElementById("inputArea").classList.add("hidden");
    document.getElementById("respuesta").value = "";

    let tiempoMostrar = nivel * 1000;

    setTimeout(() => {
      document.getElementById("sequence").classList.add("hidden");
      document.getElementById("inputArea").classList.remove("hidden");
      document.getElementById("instrucciones").textContent = (modo === "directo") ?
        "Escribe los números en el mismo orden:" :
        "Escribe los números en orden inverso:";
    }, tiempoMostrar);
  }

  function checkAnswer() {
    let input = document.getElementById("respuesta").value.trim();
    input = input.replace(/\s+/g, '');
    let respuestaUsuario = input.split('').map(Number);

    let secuenciaCorrecta = (modo === "directo") ? currentSequence : [...currentSequence].reverse();

    let esCorrecto = (
      respuestaUsuario.length === secuenciaCorrecta.length &&
      respuestaUsuario.every((num, i) => num === secuenciaCorrecta[i])
    );

    if (esCorrecto) {
      score++;
    }

    historial.push({
      nivel: nivel,
      generado: currentSequence,
      respuesta: respuestaUsuario,
      correcto: esCorrecto
    });

    document.getElementById("resultado").textContent = esCorrecto ?
      `✅ Correcto (Puntaje: ${score})` :
      `❌ Incorrecto. Era: ${secuenciaCorrecta.join(" ")} (Puntaje: ${score})`;

    nivel++;
    setTimeout(() => {
      document.getElementById("resultado").textContent = "";
      nextLevel();
    }, 2000);
  }
</script>
</body>
</html>
